<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boot.dao.MysqlMypageMapper">
		
	<!-- 1. 닉네임으로 넘버 가져오기. -->
	<select id="getMyNumber" parameterType="String" resultType="String">
		select mnum from member where mnick=#{mnick}
	</select>
	
	<!-- 2. 넘버로 member정보(닉네임,사진,인트로) 가져오기  -->
	<select id="getMyMemberDto" parameterType="String" resultType="Member">
		select * from member where mnum=${mnum}
	</select>
	
	<!-- 3. 넘버로 게시물 갯수 가져오기 (rmnum은 멤버번호) -->
	<select id="getMyListCount" parameterType="String" resultType="String">
      select count(*) from review where rmnum=#{mnum}
	</select>
	
	<!-- 4. 넘버로 팔로워(나를 팔로잉한 사람) 수 가져오기 -->
	<select id="getFollower" parameterType="String" resultType="String">
 		select count(*) from follower where fmnum=#{mnum}
	</select>
	
	<!-- 5. 넘버로 팔로우(내가 팔로잉한 사람) 수 가져오기 -->
	<select id="getFollow" parameterType="String" resultType="String">
        select count(*) from follower where follower=#{mnum}
    </select>
    
    <!-- 6. 전체 리뷰 가져오기 -->
	<select id="getMyAllList" parameterType="String" resultType="review">
      select * from review r, member m where r.rmnum = m.mnum and m.mnum=#{mnum} order by rwriteday desc;
	</select>
	
	<!-- 7. 한식 리뷰 가져오기 -->
	<select id="getMyKorList" parameterType="String" resultType="review">
      select * from review r, member m where r.rmnum = m.mnum and m.mnum=#{mnum} and rcategory='한식' order by rwriteday desc;
	</select>
	<!-- 8. 중식 리뷰 가져오기 -->
	<select id="getMyCnList" parameterType="String" resultType="review">
      select * from review r, member m where r.rmnum = m.mnum and m.mnum=#{mnum} and rcategory='중식' order by rwriteday desc;
	</select>
	<!-- 9. 일식 리뷰 가져오기 -->
	<select id="getMyJapList" parameterType="String" resultType="review">
      select * from review r, member m where r.rmnum = m.mnum and m.mnum=#{mnum} and rcategory='일식' order by rwriteday desc;
	</select>
	<!-- 10. 일식 리뷰 가져오기 -->
	<select id="getMyWesList" parameterType="String" resultType="review">
      select * from review r, member m where r.rmnum = m.mnum and m.mnum=#{mnum} and rcategory='양식' order by rwriteday desc;
	</select>
	<!-- 11. 기타 리뷰 가져오기 -->
	<select id="getMyEtcList" parameterType="String" resultType="review">
      select * from review r, member m where r.rmnum = m.mnum and m.mnum=#{mnum} and rcategory='기타' order by rwriteday desc;
	</select>
	
	<!-- 12. 리뷰 데이터들 가져오기 -->
	
	<!-- 12. 1 rnum으로 멤버번호,닉네임,사진,내용,쓴날짜,가게이름,가게주소,해시테그 가져오기. -->
	<select id="getMyReviewData" parameterType="String" resultType="review">
		select * from member, review, restaurant,hashtag where rnum=#{rnum} and revnum=rnum and crnum=rnum and  mnum=rmnum
	</select>
	
	<!-- 12. 2 rnum으로 사진들 가져오기. -->
	<select id="getMyReviewPic" parameterType="String" resultType="String">
		select picname from repic where pirnum=#{rnum} limit 1;
	</select>
	
	<!-- 12. 3 좋아요 수 가져오기 -->
	<select id="getMyLikeCount" parameterType="String" resultType="String">
		select count(*) from likere where lrnum=#{rnum}
	</select>
	
	
</mapper>
